<template>
    <div id="video-details" class="content-area unselectable">
        <div class="detail-header">
            <div style="float:left;cursor:pointer;padding:0;margin:0;" if.bind="theme.is_desktop">
                <chat-button chatroom_id.two-way="chatroom_id" caption.bind="'photos.add-details'"
                             new-chatroom.delegate="create_chatroom()"
                             chatroom-deleted.delegate="chatroom_deleted($event)">
                </chat-button>
                <i class="far fa-lg fa-arrow-up fa-rotate-90 ${next_class}" t="[title]photos.next-slide"
                   click.trigger="go_next($event)" if.bind="photo_ids.length > 1"></i>
                <i class="far fa-lg fa-arrow-up" t="[title]go-back" click.trigger="go_back()"
                   if.bind="theme.is_desktop"></i>
                <i class="far fa-lg fa-arrow-up fa-rotate-270 ${prev_class}" t="[title]photos.prev-slide"
                   click.trigger="go_prev($event)" if.bind="photo_ids.length > 1"></i>
            </div>
            <h3 dir="rtl" style="float: right;margin:0px;">
                ${video_story.name}
            </h3>
        </div>
        <div class="video-detail-body">

            <div class="data-area">
                <f3>Video information</f3>
                <div if.bind="user.editing">
                    <editable style="background-color:beige;margin-bottom:12px;"
                              settings.bind="{show_date:false, class:'story-section', checkable: false}"
                              story.bind="video_story">
                    </editable>
                </div>
                <div if.bind="!user.editing">

                </div>
            </div>
            <div class="video-area">
                <div class="video-display-area">
                    <video ref="video_element" id="video-element" width="640" height="480" controls  if.bind="video_type!='youtube'">
                      <source src.bind="video_source" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                    <yt-player if.bind="video_type=='youtube'" player.bind="yt_player" video-id.bind="video_src" player_is_ready.bind="player_is_ready"></yt-player>

                </div>

                <button class="btn btn-primary" click.delegate="add_cue_point()" if.bind="user.editing" disabled.bind="(!player.paused) || already_in">
                    ${'videos.add-cue' & t}
                </button>
                <div class="cue-points-area table-scroller">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <th css="text-align:${theme.same_dir};" style="width:100px">${'videos.cue-time' & t}</th>
                            <th style="width:40px"><i class="fa fa-users" style="margin-left:5px;"></i></th>
                            <th css="text-align:${theme.same_dir};">${'videos.cue-description' & t}</th>
                            <th if.bind="user.editing" style="width:40px"><i class="fa fa-trash" style="margin-left:5px;"></i></th>
                        </thead>
                        <tbody>
                            <tr repeat.for="cue of cue_points">
                                <td>
                                    ${cue.time | formatTime}
                                    <i class="${cue.is_current ? 'fas' : 'far'} fa-circle" click.delegate="jump_to_cue(cue)" style="float:left;margin-top:4px;cursor:pointer;"></i>
                                </td>
                                <td>
                                    <i style="cursor:pointer"
                                       class="fa fa-users"
                                       title="${'videos.members-in' & t}"
                                       click.delegate="select_members(cue)">
                                    </i>
                                </td>
                                <td>
                                    <span if.bind="!user.editing">
                                        ${cue.description}
                                    </span>
                                    <span if.bind="user.editing">
                                        <input type="text"
                                               value.bind="cue.description"
                                               placeholder="${'videos.describe-cue' & t}"
                                               change.delegate="cue_description_changed(cue)" style="height:28px;width:100%;"/>
                                    </span>
                                </td>
                                <td if.bind="user.editing" style="width:40px" click.delegate="remove_cue(cue)"><i style="margin-right:5px;cursor:pointer;" class="fa fa-trash"></i></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</template>
